//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */

//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?void (this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(null==e)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o=x.keys(e),i=0,s=o.length;s>i;i++)if(t.call(r,e[o[i]],o[i],e)===n)return;return e};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;i>u&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===x&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;t>f?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this),define("bootstrap",["jquery"],function(e){if("undefined"==typeof e)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(e),+function(e){function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.2.0",r.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.2.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),r[i](null==s[t]?this.options[t]:s[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()})}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.2.0",n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.to=function(t){var n=this,r=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}if(i.hasClass("active"))return this.sliding=!1;var l=i[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(i)]);h&&h.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:l,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one("bsTransitionEnd",function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(p)},0)}).emulateTransitionEnd(1e3*r.css("transition-duration").slice(0,-1))):(r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);!i&&s.toggle&&"show"==t&&(t=!t),i||r.data("bs.collapse",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=e.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.$parent&&this.$parent.find("> .panel > .in");if(r&&r.length){var i=r.data("bs.collapse");if(i&&i.transitioning)return;t.call(r,"hide"),i||r.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var u=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(350)[s](this.$element[0][u])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var r=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r,i=e(this),s=i.attr("data-target")||n.preventDefault()||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),o=e(s),u=o.data("bs.collapse"),f=u?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);u&&u.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(o,f)})}(e),+function(e){function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.2.0",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.divider):visible a",l=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(l.length){var h=l.index(l.filter(":focus"));38==t.keyCode&&h>0&&h--,40==t.keyCode&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(e),+function(e){function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else t&&t()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),s=this.getUID(this.type);this.setContent(),i.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,f=u.test(o);f&&(o=o.replace(u,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var l=this.getPosition(),c=i[0].offsetWidth,h=i[0].offsetHeight;if(f){var p=o,d=this.$element.parent(),v=this.getPosition(d);o="bottom"==o&&l.top+l.height+h-v.scroll>v.height?"top":"top"==o&&l.top-v.scroll-h<0?"bottom":"right"==o&&l.right+c>v.width?"left":"left"==o&&l.left-c<v.left?"right":o,i.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,l,c,h);this.applyPlacement(m,o);var g=function(){r.$element.trigger("shown.bs."+r.type),r.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=c.left?2*c.left-i+f:2*c.top-s+l,p=c.left?"left":"top",d=c.left?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][d],p)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName;return e.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:r?e(window).width():t.outerWidth(),height:r?e(window).height():t.outerHeight()},r?{top:0,left:0}:t.offset())},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.2.0",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(e),+function(e){function t(n,r){var i=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var r=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[t]().top+n,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){r.offsets.push(this[0]),r.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<=i[0])return o!=(e=s[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.2.0",n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.closest("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},n.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),t.call(e(this),"show")})}(e),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.2.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),r=this.$target.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof u&&(u=s.bottom(this.$element));var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=t-u?"bottom":null!=o&&o>=r?"top":!1;if(this.affixed!==f){null!=this.unpin&&this.$element.css("top","");var l="affix"+(f?"-"+f:""),h=e.Event(l+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=f,this.unpin="bottom"==f?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==f&&this.$element.offset({top:t-this.$element.height()-u}))}}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},r.offsetBottom&&(r.offset.bottom=r.offsetBottom),r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(e)}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e){typeof define=="function"&&define.amd?define("jquery-plus/cookie",["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(arguments.length>1&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setMilliseconds(l.getMilliseconds()+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[],p=0,d=h.length;for(;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}}),define("common/sign",["require"],function(e){var t=$($("#tpl-login").html()).appendTo("body").hide();t.on("submit","form",function(e){e.preventDefault(),$.ajax({method:"POST",url:rainbow.baseUrl+"/signin",data:{userId:t.find("input[name=userId]").val(),password:t.find("input[name=password]").val()}}).error(function(e){rainbow.alert(e.responseJSON.content)}).success(function(){rainbow.cookie("status",1),rainbow.nav.request(rainbow.back),t.fadeOut()})});var n={login:function(e){t.fadeIn()},logout:function(){$.post(rainbow.baseUrl+"/signout"),rainbow.cookie("status",""),rainbow.route("signin",{trigger:!0})},isIn:function(){return rainbow.cookie("status")}};return n}),define("base/app",["require","exports","module","jquery-plus/cookie","../common/sign"],function(e,t,n){var r={};rainbow=r,e("jquery-plus/cookie"),r.cookie=$.cookie,r.mobile=!1,r.html5=!1,r.baseUrl=n.config().baseUrl;var i=Backbone.View.extend({tagName:"div",render:function(){return this.$el.html($("#tpl-layout").html()),this.$el.height("100%"),this}});r.layout=new i,$("body").append(r.layout.render().el),r.alert=function(e,t,n){alert(e)},r.confirm=function(e,t,n){return confirm(e)},r.sign=e("../common/sign");var s=Backbone.Router.extend({routes:{signin:"signin",signout:"signout"},signin:function(){r.sign.login()},signout:function(){r.sign.logout()}});return r.router=new s,r.route=function(e,t){return r.back=window.location.hash.slice(1),r.back=r.back==="signout"?"":r.back,r.router.navigate(e,t)},r.start=function(){Backbone.History.started||Backbone.history.start()},r.views={},r.current,_.extend(r,Backbone.Events),r.window={},$(window).on("resize",function(){r.window.height=$(window).innerHeight(),r.window.width=$(window).innerWidth(),r.trigger("resize")}),"dev.xiyouqi.cn"!==location.hostname&&$.ajaxPrefilter(function(e,t,n){e.crossDomain={crossDomain:!0},e.xhrFields={withCredentials:!0}}),r}),define("view/base",["require"],function(e){var t=Backbone.View.extend({tagName:"div",initialize:function(e){this.coms=e?e.coms:null,this.nestedLevel=e?e.nestedLevel:null,this.parent=e?e.parent:null,this.widget=null,rainbow.on("resize",this.resize,this)},template:function(e){var e=e?e:this.tplId?$("#"+this.tplId).html():"";this.$el.html(_.template(e,this.model.toJSON()))},setBodyHeight:function(){var e=$(".navbar").outerHeight(),t=this.getHeaderHeight(),n=this.$(".rb-content-header").eq(0).outerHeight(),r=this.$(".rb-view-footer").eq(0).outerHeight();this.$(".rb-content-body").eq(0).height($(window).innerHeight()-e-t-n-r),$(".rb-view").height($(window).innerHeight()-e);if(this.widget&&this.widget.copyHeader){this.$(".rb-content-header").html(this.widget.copyHeader()).css("padding","0 15px");var i=1,s=0,o=0,u=this}return this},getHeaderHeight:function(){var e=this.$(".rb-view-header").eq(0).outerHeight();return this.parent&&this.nestedLevel&&(e+=this.parent.getHeaderHeight()),e},render:function(){return this.template(),this},resize:function(){return this.trigger("resize"),this.setBodyHeight(),this},hide:function(){return rainbow.off("resize",this.resize,this),this.$el.hide(),this.trigger("hide"),this},show:function(){return this.$el.show(),this.setBodyHeight(),rainbow.on("resize",this.resize,this),this.trigger("show"),this},error:function(){this.trigger("error")},destroy:function(){rainbow.off("resize",this.resize,this),this.trigger("destroy"),this.remove()}});return t}),define("view/kit/list",["require"],function(e){var t=Backbone.View.extend({initialize:function(e){this.view=e.view}}),n=Backbone.View.extend({initialize:function(e){this.view=e.view},renderItem:function(e,n){var r=new t({model:e,view:this.view});this.$el.append(r.render().el)}});return{Item:t,List:n}}),define("utility/modal",["require","backbone"],function(e){var t=e("backbone"),n=t.View.extend({className:"modal fade",tpl:"#tpl-modal",attributes:{role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},initialize:function(e){this.tpl=e.tpl?e.tpl:this.tpl,this.content=e.content},render:function(){this.$el.html(_.template($(this.tpl).html(),this.model.toJSON()));var e=this.model.get("size");e&&this.$(".modal-dialog").addClass(e),this.$(".modal-body").html(this.content),this.$el.modal();var t=this;return this.$el.on("hidden.bs.modal",function(e){t.remove()}),this},show:function(){return this.$el.modal("show"),this},hide:function(){return this.$el.modal("hide"),this},close:function(){return this.hide()}});return n}),define("components/form/base",["require"],function(e){var t=Backbone.View.extend({tagName:"form",attributes:{method:"post"},events:{submit:"onSubmit","click .rb-submit:not(.disabled)":"onSubmit"},initialize:function(e){this.model=this.model?this.model:new Backbone.Model,this.isUpload=e.isUpload?e.isUpload:!1,this.items={},this.errors={}},renderItem:function(e,t){},verify:function(){this.trigger("verify")},disableSubmit:function(){return this.$(".rb-submit").addClass("disabled"),this},enableSubmit:function(){return this.$(".rb-submit").removeClass("disabled"),this},commit:function(){this.disableSubmit();if(this.isUpload)return this.uploadCommit();var e=this;this.model.save(null,{success:function(t,n,r){t.set(n.data),e.trigger("success")},error:function(t,n,r){alert(n.responseJSON.content),e.trigger("error")}})},uploadCommit:function(){var e=new FormData,t=this;this.$("input,select,textarea").each(function(t,n){var r=$(n);r.attr("type")=="file"?e.append(r.attr("name"),r[0].files[0]):e.append(r.attr("name"),r.val())}),$.ajax({url:this.model.url()+"/upload",type:"POST",data:e,processData:!1,contentType:!1}).success(function(e,n){t.trigger("success")}).error(function(e,n){alert(e.responseJSON.content),t.trigger("error")})},cancel:function(){},data:function(){return this.model.toJSON()},onSubmit:function(e){e.preventDefault(),this.verify();if(!_.isEmpty(this.errors))return rainbow.alert("Form validation does not pass, correct the error term");if(this.callBack){this.callBack(this.data(),this);return}this.commit()},destroy:function(){this.remove()}});return t}),define("components/controls/base",["require"],function(e){var t=Backbone.View.extend({initialize:function(e){this.form=e.form,this.type=e.type?e.type:this.model.get("control"),this.title=this.model.get("alias")?this.model.get("alias"):this.model.get("name"),this.attributes={type:this.type,name:this.model.get("name"),value:this.model.get("value")},this.format=e.format,this.display=e.display},before:function(){return this.format&&this.format.apply(this),this},after:function(){return this.display&&this.display.apply(this),this},setValue:function(){},getValue:function(){return this.$el.val()}});return t}),define("components/controls/input",["require","./base"],function(e){var t=e("./base"),n=t.extend({tagName:"input",initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return this.before(),this.$el.attr(this.attributes),this.after(),this},getValue:function(){return this.type==="checkbox"?this.el.checked:this.$el.val()},getChecked:function(){}});return n}),define("components/controls/select",["require","./base"],function(e){var t=e("./base"),n=t.extend({tagName:"select",optionTpl:'<option value="<%=value%>"><%=title%></option>',initialize:function(e){t.prototype.initialize.apply(this,arguments),this.multiple=e.multiple,this.isTree=e.isTree,delete this.attributes.value,delete this.attributes.type},render:function(){return this.before(),this.$el.attr(this.attributes),this.multiple&&this.$el.attr("multiple",!0),_.each(this.model.get("list"),this.renderOption,this),this.after(),this},before:function(){return this.model.get("isNull")&&this.addEmptyOption(),!this.model.get("required")&&this.model.get("isNull")!==!0&&this.addEmptyOption(),this.model.format&&this.model.format.apply(this),this},after:function(){return this.selected(this.model.get("value")),this.display&&this.display.apply(this),this},addEmptyOption:function(){return this.model.get("list").unshift({title:"(Null)",value:""}),this},addGroup:function(){},levelJoin:function(e){var t="";for(var n=0;n<e;n++)t+="";return t},renderOption:function(e,t,n,r){r=r?r:0;if(this.isTree){var i=this.levelJoin(r);e.title=i+""+e.title,this.$el.append(_.template(this.optionTpl,e)),e._childList&&_.each(e._childList,function(e){this.renderOption(e,t,null,r+1)},this)}else this.$el.append(_.template(this.optionTpl,e));return this},selected:function(e){return this.$('option[value="'+e+'"]').attr("selected",!0),this}});return n}),define("components/controls/textarea",["require","./base"],function(e){var t=e("./base"),n=t.extend({tagName:"textarea",initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return this.before(),this.attributes.rows=4,this.$el.attr(this.attributes),this.$el.val(this.attributes.value),this.after(),this},getValue:function(){return this.editor&&this.editor.sync(),this.$el.val()}});return n}),define("components/controls/control",["require","./input","./select","./textarea"],function(e){return{input:e("./input"),select:e("./select"),textarea:e("./textarea")}}),define("utility/filter",["require","exports","module"],function(e,t){t.enum=function(e,t,n){list=this.model.get("list").split(","),list=_.map(list,function(e){var t=e.split(":");return{title:t[1]?t[1]:t[0],value:t[0]}});var r=_.findWhere(list,{value:e.toString()}),e=r?r.title:e;return!n&&this.model.get("display")&&this.model.get("display")==="title"&&(e='<a class="rb-title" href="javascript:void(0);">'+e+"</a>"),e.toString()},t.wordbook=function(e,t,n){function s(e,t,n,r){var i=t.length;for(var o=0;o<i;o++){if(e==t[o][n])return t[o][r]?t[o][r]:"";if(t[o]._childList){var u=s(e,t[o]._childList,n,r);if(u!==undefined)return u}}return undefined}var r=this.model.get("typeObject"),i=r.schema.idName,o=_.findWhere(r.schema.attributes,{display:"title"}),u=s(e,r.data.collection,i,o.name),e=u!==undefined?u:"";return!n&&this.model.get("display")&&this.model.get("display")==="title"&&(e='<a class="rb-title" href="javascript:void(0);">'+e+"</a>"),e.toString()},t.time=function(e,t,n){var r="";time=parseInt(e);if(time){var i=new Date(time),s=new Date,o=i.getFullYear();t?2===t&&(o=""):o=o.toString().slice(2);var u=i.getMonth()+1;u=u<10?"0"+u:u;var a=i.getDate();a=a<10?"0"+a:a,r+=o?o+"-":"",r+=u?u+"-":"",r+=a?a+"":"",!0!==n&&(r+=" "+(i.getHours()<10?"0"+i.getHours():i.getHours()),r+=":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes()))}else r=e;return r},t.date=function(e){return t.time(e,2,!0)},t.id=function(e){return e},t.title=function(e){return'<a class="rb-title" href="javascript:void(0);">'+e+"</a>"},t.byte=function(e){var t="-",n=parseInt(e);return n?n&&n<1024?t="1KB":n<1048576?t=Math.round(n/1024)+"KB":t=(n/1048576).toFixed(2)+"MB":t=e,t}}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){function e(){return Pr.apply(null,arguments)}function t(e){Pr=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,n,r){return Lt(e,t,n,r,!0).utc()}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function f(e){return null==e._pf&&(e._pf=a()),e._pf}function l(e){if(null==e._isValid){var t=f(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function c(e){var t=u(NaN);return null!=e?o(f(t),e):f(t).userInvalidated=!0,t}function h(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=f(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Br.length>0)for(n in Br)r=Br[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function p(t){h(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),jr===!1&&(jr=!0,e.updateOffset(this),jr=!1)}function d(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function v(e){return 0>e?Math.ceil(e):Math.floor(e)}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=v(t)),n}function g(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&m(e[r])!==m(t[r]))&&o++;return o+s}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,r,i,s=0;s<e.length;){for(i=b(e[s]).split("-"),t=i.length,n=b(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=E(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&g(i,n,!0)>=t-1)break;t--}s++}return null}function E(e){var t=null;if(!Fr[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Hr._abbr,require("./locale/"+e),S(t)}catch(n){}return Fr[e]}function S(e,t){var n;return e&&(n="undefined"==typeof t?T(e):x(e,t),n&&(Hr=n)),Hr._abbr}function x(e,t){return null!==t?(t.abbr=e,Fr[e]=Fr[e]||new y,Fr[e].set(t),S(e),Fr[e]):(delete Fr[e],null)}function T(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Hr;if(!n(e)){if(t=E(e))return t;e=[e]}return w(e)}function N(e,t){var n=e.toLowerCase();Ir[n]=Ir[n+"s"]=Ir[t]=e}function C(e){return"string"==typeof e?Ir[e]||Ir[e.toLowerCase()]:void 0}function k(e){var t,n,r={};for(n in e)s(e,n)&&(t=C(n),t&&(r[t]=e[n]));return r}function L(t,n){return function(r){return null!=r?(O(this,t,r),e.updateOffset(this,n),this):A(this,t)}}function A(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function O(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function M(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=C(e),"function"==typeof this[e])return this[e](t);return this}function _(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function D(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(zr[e]=i),t&&(zr[t[0]]=function(){return _(i.apply(this,arguments),t[1],t[2])}),n&&(zr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function P(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,n,r=e.match(qr);for(t=0,n=r.length;n>t;t++)zr[r[t]]?r[t]=zr[r[t]]:r[t]=P(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function B(e,t){return e.isValid()?(t=j(t,e.localeData()),Ur[t]=Ur[t]||H(t),Ur[t](e)):e.localeData().invalidDate()}function j(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Rr.lastIndex=0;r>=0&&Rr.test(e);)e=e.replace(Rr,n),Rr.lastIndex=0,r-=1;return e}function F(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function I(e,t,n){ii[e]=F(t)?t:function(e){return e&&n?n:t}}function q(e,t){return s(ii,e)?ii[e](t._strict,t._locale):new RegExp(R(e))}function R(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=m(e)}),n=0;n<e.length;n++)si[e[n]]=r}function z(e,t){U(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function W(e,t,n){null!=t&&s(si,e)&&si[e](t,n._a,n,e)}function X(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function V(e){return this._months[e.month()]}function $(e){return this._monthsShort[e.month()]}function J(e,t,n){var r,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=u([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function K(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),X(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Q(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):A(this,"Month")}function G(){return X(this.year(),this.month())}function Y(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ui]<0||n[ui]>11?ui:n[ai]<1||n[ai]>X(n[oi],n[ui])?ai:n[fi]<0||n[fi]>24||24===n[fi]&&(0!==n[li]||0!==n[ci]||0!==n[hi])?fi:n[li]<0||n[li]>59?li:n[ci]<0||n[ci]>59?ci:n[hi]<0||n[hi]>999?hi:-1,f(e)._overflowDayOfYear&&(oi>t||t>ai)&&(t=ai),f(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function et(e,t){var n=!0;return o(function(){return n&&(Z(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function tt(e,t){vi[e]||(Z(t),vi[e]=!0)}function nt(e){var t,n,r=e._i,i=mi.exec(r);if(i){for(f(e).iso=!0,t=0,n=gi.length;n>t;t++)if(gi[t][1].exec(r)){e._f=gi[t][0];break}for(t=0,n=yi.length;n>t;t++)if(yi[t][1].exec(r)){e._f+=(i[6]||" ")+yi[t][0];break}r.match(ti)&&(e._f+="Z"),Et(e)}else e._isValid=!1}function rt(t){var n=bi.exec(t._i);return null!==n?void (t._d=new Date(+n[1])):(nt(t),void (t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function it(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function st(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ot(e){return ut(e)?366:365}function ut(e){return e%4===0&&e%100!==0||e%400===0}function at(){return ut(this.year())}function ft(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=At(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function lt(e){return ft(e,this._week.dow,this._week.doy).week}function ct(){return this._week.dow}function ht(){return this._week.doy}function pt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function dt(e){var t=ft(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function vt(e,t,n,r,i){var s,o=6+i-r,u=st(e,0,1+o),a=u.getUTCDay();return i>a&&(a+=7),n=null!=n?1*n:i,s=1+o+7*(t-1)-a+n,{year:s>0?e:e-1,dayOfYear:s>0?s:ot(e-1)+s}}function mt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function gt(e,t,n){return null!=e?e:null!=t?t:n}function yt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function bt(e){var t,n,r,i,s=[];if(!e._d){for(r=yt(e),e._w&&null==e._a[ai]&&null==e._a[ui]&&wt(e),e._dayOfYear&&(i=gt(e._a[oi],r[oi]),e._dayOfYear>ot(i)&&(f(e)._overflowDayOfYear=!0),n=st(i,0,e._dayOfYear),e._a[ui]=n.getUTCMonth(),e._a[ai]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[fi]&&0===e._a[li]&&0===e._a[ci]&&0===e._a[hi]&&(e._nextDay=!0,e._a[fi]=0),e._d=(e._useUTC?st:it).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fi]=24)}}function wt(e){var t,n,r,i,s,o,u;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,o=4,n=gt(t.GG,e._a[oi],ft(At(),1,4).year),r=gt(t.W,1),i=gt(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=gt(t.gg,e._a[oi],ft(At(),s,o).year),r=gt(t.w,1),null!=t.d?(i=t.d,s>i&&++r):i=null!=t.e?t.e+s:s),u=vt(n,r,i,o,s),e._a[oi]=u.year,e._dayOfYear=u.dayOfYear}function Et(t){if(t._f===e.ISO_8601)return void nt(t);t._a=[],f(t).empty=!0;var n,r,i,s,o,u=""+t._i,a=u.length,l=0;for(i=j(t._f,t._locale).match(qr)||[],n=0;n<i.length;n++)s=i[n],r=(u.match(q(s,t))||[])[0],r&&(o=u.substr(0,u.indexOf(r)),o.length>0&&f(t).unusedInput.push(o),u=u.slice(u.indexOf(r)+r.length),l+=r.length),zr[s]?(r?f(t).empty=!1:f(t).unusedTokens.push(s),W(s,r,t)):t._strict&&!r&&f(t).unusedTokens.push(s);f(t).charsLeftOver=a-l,u.length>0&&f(t).unusedInput.push(u),f(t).bigHour===!0&&t._a[fi]<=12&&t._a[fi]>0&&(f(t).bigHour=void 0),t._a[fi]=St(t._locale,t._a[fi],t._meridiem),bt(t),Y(t)}function St(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function xt(e){var t,n,r,i,s;if(0===e._f.length)return f(e).invalidFormat=!0,void (e._d=new Date(NaN));for(i=0;i<e._f.length;i++)s=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Et(t),l(t)&&(s+=f(t).charsLeftOver,s+=10*f(t).unusedTokens.length,f(t).score=s,(null==r||r>s)&&(r=s,n=t));o(e,n||t)}function Tt(e){if(!e._d){var t=k(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],bt(e)}}function Nt(e){var t=new p(Y(Ct(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ct(e){var t=e._i,i=e._f;return e._locale=e._locale||T(e._l),null===t||void 0===i&&""===t?c({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),d(t)?new p(Y(t)):(n(i)?xt(e):i?Et(e):r(t)?e._d=t:kt(e),e))}function kt(t){var s=t._i;void 0===s?t._d=new Date:r(s)?t._d=new Date(+s):"string"==typeof s?rt(t):n(s)?(t._a=i(s.slice(0),function(e){return parseInt(e,10)}),bt(t)):"object"==typeof s?Tt(t):"number"==typeof s?t._d=new Date(s):e.createFromInputFallback(t)}function Lt(e,t,n,r,i){var s={};return"boolean"==typeof n&&(r=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Nt(s)}function At(e,t,n,r){return Lt(e,t,n,r,!1)}function Ot(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return At();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](r))&&(r=t[i]);return r}function Mt(){var e=[].slice.call(arguments,0);return Ot("isBefore",e)}function _t(){var e=[].slice.call(arguments,0);return Ot("isAfter",e)}function Dt(e){var t=k(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*f+6e4*a+36e5*u,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=T(),this._bubble()}function Pt(e){return e instanceof Dt}function Ht(e,t){D(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+_(~~(e/60),2)+t+_(~~e%60,2)})}function Bt(e){var t=(e||"").match(ti)||[],n=t[t.length-1]||[],r=(n+"").match(Ti)||["-",0,0],i=+(60*r[1])+m(r[2]);return"+"===r[0]?i:-i}function jt(t,n){var i,s;return n._isUTC?(i=n.clone(),s=(d(t)||r(t)?+t:+At(t))- +i,i._d.setTime(+i._d+s),e.updateOffset(i,!1),i):At(t).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function It(t,n){var r,i=this._offset||0;return null!=t?("string"==typeof t&&(t=Bt(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(r=Ft(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?tn(this,Qt(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Ft(this)}function qt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Rt(e){return this.utcOffset(0,e)}function Ut(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this}function zt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Bt(this._i)),this}function Wt(e){return e=e?At(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Xt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Vt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(h(e,this),e=Ct(e),e._a){var t=e._isUTC?u(e._a):At(e._a);this._isDSTShifted=this.isValid()&&g(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function $t(){return!this._isUTC}function Jt(){return this._isUTC}function Kt(){return this._isUTC&&0===this._offset}function Qt(e,t){var n,r,i,o=e,u=null;return Pt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(u=Ni.exec(e))?(n="-"===u[1]?-1:1,o={y:0,d:m(u[ai])*n,h:m(u[fi])*n,m:m(u[li])*n,s:m(u[ci])*n,ms:m(u[hi])*n}):(u=Ci.exec(e))?(n="-"===u[1]?-1:1,o={y:Gt(u[2],n),M:Gt(u[3],n),d:Gt(u[4],n),h:Gt(u[5],n),m:Gt(u[6],n),s:Gt(u[7],n),w:Gt(u[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Zt(At(o.from),At(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Dt(o),Pt(e)&&s(e,"_locale")&&(r._locale=e._locale),r}function Gt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Yt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Zt(e,t){var n;return t=jt(t,e),e.isBefore(t)?n=Yt(e,t):(n=Yt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function en(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(tt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=Qt(n,r),tn(this,i,e),this}}function tn(t,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=null==i?!0:i,s&&t._d.setTime(+t._d+s*r),o&&O(t,"Date",A(t,"Date")+o*r),u&&K(t,A(t,"Month")+u*r),i&&e.updateOffset(t,o||u)}function nn(e,t){var n=e||At(),r=jt(n,this).startOf("day"),i=this.diff(r,"days",!0),s=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(t&&t[s]||this.localeData().calendar(s,this,At(n)))}function rn(){return new p(this)}function sn(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=d(e)?e:At(e),+this>+e):(n=d(e)?+e:+At(e),n<+this.clone().startOf(t))}function on(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=d(e)?e:At(e),+e>+this):(n=d(e)?+e:+At(e),+this.clone().endOf(t)<n)}function un(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function an(e,t){var n;return t=C(t||"millisecond"),"millisecond"===t?(e=d(e)?e:At(e),+this===+e):(n=+At(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function fn(e,t,n){var r,i,s=jt(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=C(t),"year"===t||"month"===t||"quarter"===t?(i=ln(this,s),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:v(i)}function ln(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return 0>t-s?(n=e.clone().add(i-1,"months"),r=(t-s)/(s-n)):(n=e.clone().add(i+1,"months"),r=(t-s)/(n-s)),-(i+r)}function cn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function hn(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pn(t){var n=B(this,t||e.defaultFormat);return this.localeData().postformat(n)}function dn(e,t){return this.isValid()?Qt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vn(e){return this.from(At(),e)}function mn(e,t){return this.isValid()?Qt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gn(e){return this.to(At(),e)}function yn(e){var t;return void 0===e?this._locale._abbr:(t=T(e),null!=t&&(this._locale=t),this)}function bn(){return this._locale}function wn(e){switch(e=C(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function En(e){return e=C(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function Sn(){return+this._d-6e4*(this._offset||0)}function xn(){return Math.floor(+this/1e3)}function Tn(){return this._offset?new Date(+this):this._d}function Nn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Cn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function kn(){return l(this)}function Ln(){return o({},f(this))}function An(){return f(this).overflow}function On(e,t){D(0,[e,e.length],0,t)}function Mn(e,t,n){return ft(At([e,11,31+t-n]),t,n).week}function _n(e){var t=ft(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Dn(e){var t=ft(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Pn(){return Mn(this.year(),1,4)}function Hn(){var e=this.localeData()._week;return Mn(this.year(),e.dow,e.doy)}function Bn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function jn(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Fn(e){return this._weekdays[e.day()]}function In(e){return this._weekdaysShort[e.day()]}function qn(e){return this._weekdaysMin[e.day()]}function Rn(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=At([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Un(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=jn(e,this.localeData()),this.add(e-t,"d")):t}function zn(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wn(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Xn(e,t){D(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vn(e,t){return t._meridiemParse}function $n(e){return"p"===(e+"").toLowerCase().charAt(0)}function Jn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Kn(e,t){t[hi]=m(1e3*("0."+e))}function Qn(){return this._isUTC?"UTC":""}function Gn(){return this._isUTC?"Coordinated Universal Time":""}function Yn(e){return At(1e3*e)}function Zn(){return At.apply(null,arguments).parseZone()}function er(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function tr(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function nr(){return this._invalidDate}function rr(e){return this._ordinal.replace("%d",e)}function ir(e){return e}function sr(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function or(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function ur(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ar(e,t,n,r){var i=T(),s=u().set(r,t);return i[n](s,e)}function fr(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ar(e,t,n,i);var s,o=[];for(s=0;r>s;s++)o[s]=ar(e,s,n,i);return o}function lr(e,t){return fr(e,t,"months",12,"month")}function cr(e,t){return fr(e,t,"monthsShort",12,"month")}function hr(e,t){return fr(e,t,"weekdays",7,"day")}function pr(e,t){return fr(e,t,"weekdaysShort",7,"day")}function dr(e,t){return fr(e,t,"weekdaysMin",7,"day")}function vr(){var e=this._data;return this._milliseconds=Ki(this._milliseconds),this._days=Ki(this._days),this._months=Ki(this._months),e.milliseconds=Ki(e.milliseconds),e.seconds=Ki(e.seconds),e.minutes=Ki(e.minutes),e.hours=Ki(e.hours),e.months=Ki(e.months),e.years=Ki(e.years),this}function mr(e,t,n,r){var i=Qt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function gr(e,t){return mr(this,e,t,1)}function yr(e,t){return mr(this,e,t,-1)}function br(e){return 0>e?Math.floor(e):Math.ceil(e)}function wr(){var e,t,n,r,i,s=this._milliseconds,o=this._days,u=this._months,a=this._data;return s>=0&&o>=0&&u>=0||0>=s&&0>=o&&0>=u||(s+=864e5*br(Sr(u)+o),o=0,u=0),a.milliseconds=s%1e3,e=v(s/1e3),a.seconds=e%60,t=v(e/60),a.minutes=t%60,n=v(t/60),a.hours=n%24,o+=v(n/24),i=v(Er(o)),u+=i,o-=br(Sr(i)),r=v(u/12),u%=12,a.days=o,a.months=u,a.years=r,this}function Er(e){return 4800*e/146097}function Sr(e){return 146097*e/4800}function xr(e){var t,n,r=this._milliseconds;if(e=C(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+Er(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Sr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Tr(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function Nr(e){return function(){return this.as(e)}}function Cr(e){return e=C(e),this[e+"s"]()}function kr(e){return function(){return this._data[e]}}function Lr(){return v(this.days()/7)}function Ar(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Or(e,t,n){var r=Qt(e).abs(),i=cs(r.as("s")),s=cs(r.as("m")),o=cs(r.as("h")),u=cs(r.as("d")),a=cs(r.as("M")),f=cs(r.as("y")),l=i<hs.s&&["s",i]||1===s&&["m"]||s<hs.m&&["mm",s]||1===o&&["h"]||o<hs.h&&["hh",o]||1===u&&["d"]||u<hs.d&&["dd",u]||1===a&&["M"]||a<hs.M&&["MM",a]||1===f&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,Ar.apply(null,l)}function Mr(e,t){return void 0===hs[e]?!1:void 0===t?hs[e]:(hs[e]=t,!0)}function _r(e){var t=this.localeData(),n=Or(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Dr(){var e,t,n,r=ps(this._milliseconds)/1e3,i=ps(this._days),s=ps(this._months);e=v(r/60),t=v(e/60),r%=60,e%=60,n=v(s/12),s%=12;var o=n,u=s,a=i,f=t,l=e,c=r,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var Pr,Hr,Br=e.momentProperties=[],jr=!1,Fr={},Ir={},qr=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ur={},zr={},Wr=/\d/,Xr=/\d\d/,Vr=/\d{3}/,$r=/\d{4}/,Jr=/[+-]?\d{6}/,Kr=/\d\d?/,Qr=/\d{1,3}/,Gr=/\d{1,4}/,Yr=/[+-]?\d{1,6}/,Zr=/\d+/,ei=/[+-]?\d+/,ti=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ri=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ii={},si={},oi=0,ui=1,ai=2,fi=3,li=4,ci=5,hi=6;D("M",["MM",2],"Mo",function(){return this.month()+1}),D("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),D("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),I("M",Kr),I("MM",Kr,Xr),I("MMM",ri),I("MMMM",ri),U(["M","MM"],function(e,t){t[ui]=m(e)-1}),U(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ui]=i:f(n).invalidMonth=e});var pi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),di="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vi={};e.suppressDeprecationWarnings=!1;var mi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=et("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),D(0,["YY",2],0,function(){return this.year()%100}),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),N("year","y"),I("Y",ei),I("YY",Kr,Xr),I("YYYY",Gr,$r),I("YYYYY",Yr,Jr),I("YYYYYY",Yr,Jr),U(["YYYYY","YYYYYY"],oi),U("YYYY",function(t,n){n[oi]=2===t.length?e.parseTwoDigitYear(t):m(t)}),U("YY",function(t,n){n[oi]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var wi=L("FullYear",!1);D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),I("w",Kr),I("ww",Kr,Xr),I("W",Kr),I("WW",Kr,Xr),z(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=m(e)});var Ei={dow:0,doy:6};D("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),I("DDD",Qr),I("DDDD",Vr),U(["DDD","DDDD"],function(e,t,n){n._dayOfYear=m(e)}),e.ISO_8601=function(){};var Si=et("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=At.apply(null,arguments);return this>e?this:e}),xi=et("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=At.apply(null,arguments);return e>this?this:e});Ht("Z",":"),Ht("ZZ",""),I("Z",ti),I("ZZ",ti),U(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Bt(e)});var Ti=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ni=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ci=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Qt.fn=Dt.prototype;var ki=en(1,"add"),Li=en(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ai=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});D(0,["gg",2],0,function(){return this.weekYear()%100}),D(0,["GG",2],0,function(){return this.isoWeekYear()%100}),On("gggg","weekYear"),On("ggggg","weekYear"),On("GGGG","isoWeekYear"),On("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),I("G",ei),I("g",ei),I("GG",Kr,Xr),I("gg",Kr,Xr),I("GGGG",Gr,$r),I("gggg",Gr,$r),I("GGGGG",Yr,Jr),I("ggggg",Yr,Jr),z(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=m(e)}),z(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),D("Q",0,0,"quarter"),N("quarter","Q"),I("Q",Wr),U("Q",function(e,t){t[ui]=3*(m(e)-1)}),D("D",["DD",2],"Do","date"),N("date","D"),I("D",Kr),I("DD",Kr,Xr),I("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],ai),U("Do",function(e,t){t[ai]=m(e.match(Kr)[0],10)});var Oi=L("Date",!0);D("d",0,"do","day"),D("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),D("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),D("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),I("d",Kr),I("e",Kr),I("E",Kr),I("dd",ri),I("ddd",ri),I("dddd",ri),z(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:f(n).invalidWeekday=e}),z(["d","e","E"],function(e,t,n,r){t[r]=m(e)});var Mi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_i="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Di="Su_Mo_Tu_We_Th_Fr_Sa".split("_");D("H",["HH",2],0,"hour"),D("h",["hh",2],0,function(){return this.hours()%12||12}),Xn("a",!0),Xn("A",!1),N("hour","h"),I("a",Vn),I("A",Vn),I("H",Kr),I("h",Kr),I("HH",Kr,Xr),I("hh",Kr,Xr),U(["H","HH"],fi),U(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),U(["h","hh"],function(e,t,n){t[fi]=m(e),f(n).bigHour=!0});var Pi=/[ap]\.?m?\.?/i,Hi=L("Hours",!0);D("m",["mm",2],0,"minute"),N("minute","m"),I("m",Kr),I("mm",Kr,Xr),U(["m","mm"],li);var Bi=L("Minutes",!1);D("s",["ss",2],0,"second"),N("second","s"),I("s",Kr),I("ss",Kr,Xr),U(["s","ss"],ci);var ji=L("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/100)}),D(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,function(){return 10*this.millisecond()}),D(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),D(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),D(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),D(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),D(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),I("S",Qr,Wr),I("SS",Qr,Xr),I("SSS",Qr,Vr);var Fi;for(Fi="SSSS";Fi.length<=9;Fi+="S")I(Fi,Zr);for(Fi="S";Fi.length<=9;Fi+="S")U(Fi,Kn);var Ii=L("Milliseconds",!1);D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");var qi=p.prototype;qi.add=ki,qi.calendar=nn,qi.clone=rn,qi.diff=fn,qi.endOf=En,qi.format=pn,qi.from=dn,qi.fromNow=vn,qi.to=mn,qi.toNow=gn,qi.get=M,qi.invalidAt=An,qi.isAfter=sn,qi.isBefore=on,qi.isBetween=un,qi.isSame=an,qi.isValid=kn,qi.lang=Ai,qi.locale=yn,qi.localeData=bn,qi.max=xi,qi.min=Si,qi.parsingFlags=Ln,qi.set=M,qi.startOf=wn,qi.subtract=Li,qi.toArray=Nn,qi.toObject=Cn,qi.toDate=Tn,qi.toISOString=hn,qi.toJSON=hn,qi.toString=cn,qi.unix=xn,qi.valueOf=Sn,qi.year=wi,qi.isLeapYear=at,qi.weekYear=_n,qi.isoWeekYear=Dn,qi.quarter=qi.quarters=Bn,qi.month=Q,qi.daysInMonth=G,qi.week=qi.weeks=pt,qi.isoWeek=qi.isoWeeks=dt,qi.weeksInYear=Hn,qi.isoWeeksInYear=Pn,qi.date=Oi,qi.day=qi.days=Un,qi.weekday=zn,qi.isoWeekday=Wn,qi.dayOfYear=mt,qi.hour=qi.hours=Hi,qi.minute=qi.minutes=Bi,qi.second=qi.seconds=ji,qi.millisecond=qi.milliseconds=Ii,qi.utcOffset=It,qi.utc=Rt,qi.local=Ut,qi.parseZone=zt,qi.hasAlignedHourOffset=Wt,qi.isDST=Xt,qi.isDSTShifted=Vt,qi.isLocal=$t,qi.isUtcOffset=Jt,qi.isUtc=Kt,qi.isUTC=Kt,qi.zoneAbbr=Qn,qi.zoneName=Gn,qi.dates=et("dates accessor is deprecated. Use date instead.",Oi),qi.months=et("months accessor is deprecated. Use month instead",Q),qi.years=et("years accessor is deprecated. Use year instead",wi),qi.zone=et("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",qt);var Ri=qi,Ui={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},zi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Wi="Invalid date",Xi="%d",Vi=/\d{1,2}/,$i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ji=y.prototype;Ji._calendar=Ui,Ji.calendar=er,Ji._longDateFormat=zi,Ji.longDateFormat=tr,Ji._invalidDate=Wi,Ji.invalidDate=nr,Ji._ordinal=Xi,Ji.ordinal=rr,Ji._ordinalParse=Vi,Ji.preparse=ir,Ji.postformat=ir,Ji._relativeTime=$i,Ji.relativeTime=sr,Ji.pastFuture=or,Ji.set=ur,Ji.months=V,Ji._months=pi,Ji.monthsShort=$,Ji._monthsShort=di,Ji.monthsParse=J,Ji.week=lt,Ji._week=Ei,Ji.firstDayOfYear=ht,Ji.firstDayOfWeek=ct,Ji.weekdays=Fn,Ji._weekdays=Mi,Ji.weekdaysMin=qn,Ji._weekdaysMin=Di,Ji.weekdaysShort=In,Ji._weekdaysShort=_i,Ji.weekdaysParse=Rn,Ji.isPM=$n,Ji._meridiemParse=Pi,Ji.meridiem=Jn,S("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=et("moment.lang is deprecated. Use moment.locale instead.",S),e.langData=et("moment.langData is deprecated. Use moment.localeData instead.",T);var Ki=Math.abs,Qi=Nr("ms"),Gi=Nr("s"),Yi=Nr("m"),Zi=Nr("h"),es=Nr("d"),ts=Nr("w"),ns=Nr("M"),rs=Nr("y"),is=kr("milliseconds"),ss=kr("seconds"),os=kr("minutes"),us=kr("hours"),as=kr("days"),fs=kr("months"),ls=kr("years"),cs=Math.round,hs={s:45,m:45,h:22,d:26,M:11},ps=Math.abs,ds=Dt.prototype;ds.abs=vr,ds.add=gr,ds.subtract=yr,ds.as=xr,ds.asMilliseconds=Qi,ds.asSeconds=Gi,ds.asMinutes=Yi,ds.asHours=Zi,ds.asDays=es,ds.asWeeks=ts,ds.asMonths=ns,ds.asYears=rs,ds.valueOf=Tr,ds._bubble=wr,ds.get=Cr,ds.milliseconds=is,ds.seconds=ss,ds.minutes=os,ds.hours=us,ds.days=as,ds.weeks=Lr,ds.months=fs,ds.years=ls,ds.humanize=_r,ds.toISOString=Dr,ds.toString=Dr,ds.toJSON=Dr,ds.locale=yn,ds.localeData=bn,ds.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Dr),ds.lang=Ai,D("X",0,0,"unix"),D("x",0,0,"valueOf"),I("x",ei),I("X",ni),U("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,n){n._d=new Date(m(e))}),e.version="2.10.6",t(At),e.fn=Ri,e.min=Mt,e.max=_t,e.utc=u,e.unix=Yn,e.months=lr,e.isDate=r,e.locale=S,e.invalid=c,e.duration=Qt,e.isMoment=d,e.weekdays=hr,e.parseZone=Zn,e.localeData=T,e.isDuration=Pt,e.monthsShort=cr,e.weekdaysMin=dr,e.defineLocale=x,e.weekdaysShort=pr,e.normalizeUnits=C,e.relativeTimeThreshold=Mr;var vs=e;return vs}),define("components/controls/config",["require","../../utility/filter","moment"],function(e){var t=e("../../utility/filter"),n=e("moment");return{text:{base:"input",type:"text"},password:{base:"input",type:"password"},email:{base:"input",type:"email"},number:{base:"input",type:"number"},url:{base:"input",type:"url"},date:{base:"input",type:"text",format:function(){this.model.get("value")&&(this.attributes.value=t.time(this.model.get("value"),!0,!0))},display:function(){var e=this;setTimeout(function(){e.$el.datetimepicker({language:"zh-CN",format:"yyyy-mm-dd",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0})},50)}},datetime:{base:"input",type:"text",format:function(){this.model.get("value")&&(this.attributes.value=t.time(this.model.get("value"),!0))},display:function(){var e=this;setTimeout(function(){e.$el.datetimepicker({language:"zh-CN",format:"yyyy-mm-dd hh:ii",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1})},50)}},monthly:{base:"input",type:"hidden",display:function(){var e=this,t=$($("#tpl-control-monthly").html()),r=t.find(".left"),i=t.find(".right"),s=t.find(".mid"),o;this.model.get("value")?o=n(this.model.get("value").split(",")[0]):o=n(),s.text(o.format("MMM")+" "+o.format("YYYY")),t.find(".btn").on("click",function(t){$t=$(this),$t.hasClass("left")?o=o.add(-1,"month"):$t.hasClass("right")?o=o.add(1,"month"):o=n(e.model.get("value").split(",")[0]),s.text(o.format("MMM")+" "+o.format("YYYY"));var r=[o.format("YYYY-MM-DD"),o.clone().add(1,"month").add(-1,"day").format("YYYY-MM-DD")];e.$el.val(r.join(",")).trigger("change")}),this.$el.hide(),setTimeout(function(){e.$el.after(t)},50)}},"button-group":{base:"select",display:function(){var e=this,t=$('<div class="btn-group" role="group" style="margin:0 0 5px 8px;"></div>'),n=this.$("option");n.each(function(n,r){var i=$(r),s=$('<button type="button" class="btn btn-default"></button>'),o=i.text();o=o=="(Null)"?"All":o,s.text(o),s.data("value",i.val()),e.model.get("value")==s.data("value")&&s.addClass("btn-success"),t.append(s)}),t.find(".btn").on("click",function(t){$t=$(this);var n=$t.data("value");e.$('option:not([value="'+n+'"])').removeAttr("selected"),e.$('option[value="'+n+'"]').attr("selected",!0).trigger("change"),$t.siblings().removeClass("btn-success"),$t.addClass("btn-success")}),this.$el.hide(),setTimeout(function(){e.$el.after(t),e.$el.prev("label").hide()},50)}},select:{base:"select"},checkbox:{base:"input",type:"checkbox",display:function(){var e=this.model.get("metaType");e&&e==="Boolean"&&(this.$el.val(1),this.model.get("value")&&this.$el.attr("checked",!0))}},radio:{base:"input",type:"radio"},file:{base:"input",type:"file",display:function(){}},hidden:{base:"input",type:"hidden"},textarea:{base:"textarea"},editor:{base:"textarea",display:function(){this.$el.hide().css("height",300).css("width",420);var e=this;setTimeout(function(){e.editor=KindEditor.create('textarea[name="'+e.model.get("name")+'"]',{resizeType:1,minWidth:"450px",allowPreviewEmoticons:!1,allowImageUpload:!1,items:["fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","image","link","|","fullscreen"]})},200)}},chosen:{base:"select",display:function(){var e=this;setTimeout(function(){e.$el.css("width","260").select2({theme:"classic"})},10)}},multiple:{base:"select",multiple:"multiple",display:function(){var e=this;setTimeout(function(){e.$el.css("width","260").select2({theme:"classic"})},10)}}}}),define("components/form/validation",["require","exports","module"],function(e,t){function n(e){var t=0;e+="";var n=e.split(""),r=n.length;for(var i=0;i<r;i++)n[i].charCodeAt(0)<299?t++:t+=2;return t}function r(e){return e=="0"||!!e}t.required=function(e){return e!="0"&&!e?"is required":!0},t.integer=function(e){return t.number(e)},t.number=function(e){return r(e)&&!$.isNumeric(e)?"must be a number":!0},t.max=function(e,t){return r(e)&&t<e?"not greater than "+t:!0},t.min=function(e,t){return r(e)&&t>e?"not less than "+t:!0},t.maxLength=function(e,t){return r(e)&&t<n(e)?"not more than "+t+" characters":!0},t.minLength=function(e,t){return r(e)&&t>n(e)?"not less than "+t+" characters":!0},t.date=function(e){return!0},t.datetime=function(e){return!0},t.year=function(e){return!0},t.month=function(e){return!0},t.alpha=function(e){var t=/^[A-Za-z]+$/;return r(e)&&!t.test(e)?"must be letters":!0},t.chinese=function(e){var t=/^[\u4E00-\u9FFF]+$/;return r(e)&&!t.test(e)?"must be chinese":!0},t.email=function(e){var t=/^[0-9a-zA-Z]+@[0-9a-zA-Z]+[\.]{1}[0-9a-zA-Z]+[\.]?[0-9a-zA-Z]+$/;return r(e)&&!t.test(e)?"must be email":!0},t.password=function(e){var t=/^[a-zA-Z]\w{5,17}$/;return r(e)&&!t.test(e)?"must be 6-18 letters or numbers":!0},t.zip=function(e){var t=/[1-9]d{5}(?!d)/;return r(e)&&!t.test(e)?"must be 6-18 letters or numbers":!0},t.telphone=function(e){var t=/^d{4}-d{8}|1d{10}$/;return r(e)&&!t.test(e)?"must be 6-18 letters or numbers":!0},t.url=function(e){var t=/^[a-zA-z]+:\/\/[^\s]*$/;return r(e)&&!t.test(e)?"must be url":!0},t.code=function(e){var t=/^[a-zA-Z][a-zA-Z0-9-]{0,127}$/;return r(e)&&!t.test(e)?"must be less than 64 alphanumeric and dash":!0},t.variable=function(e){var t=/^[a-zA-Z][a-zA-Z0-9_]{0,63}$/;return r(e)&&!t.test(e)?"must be less than 64 alphanumeric and underscore":!0}}),define("components/form/item",["require","../controls/control","../controls/config","./validation"],function(e){var t=e("../controls/control"),n=e("../controls/config"),r=e("./validation"),i=Backbone.View.extend({className:"form-group",initialize:function(e){this.form=e.form,this.control=null,this.type=e.type,this.type=this.type?this.type:"general",this.type==="filter"&&this.model.set("isNull",!this.model.get("required"));var t=this;this.form.on("verify",function(){t.verify()})},events:{"change input,textarea,select":"onChange","change input[type=file]":"onFileChange","blur input,textarea,select":"onChange","focus input,textarea,select":"onFocus"},render:function(){var e={general:'<label class="col-sm-3 control-label"><%=alias?alias:name%></label><div class="col-sm-9"></div>',filter:"<label><%=alias?alias:name%></label>"};return this.$el.html(_.template(e[this.type],this.model.toJSON())),this.renderControl(),this.model.get("required")&&this.type!=="filter"&&this.$("label").append('<em class="text-danger"> * </em>'),this},renderControl:function(){this.list();var e=this.form.model.get(this.model.get("name"));e&&this.model.set("value",e);var r=this.model.get("control"),i=this.model.get("typeObject")&&this.model.get("typeObject").mode=="tree"?!0:!1;if(!r)switch(this.model.get("metaType")){case"Boolean":r="checkbox";break;case"Text":r="textarea";break;case"Object":r="textarea";break;case"Array":r="textarea";break;case"Time":r="date";break;default:r="text"}var s=n[r];s=s?s:{base:"input",type:"text"},s.model=this.model,s.isTree=i,s.className="form-control",this.control=new t[s.base](s);var o=this.$("div").size()?this.$("div"):this.$el;this.control.render().$el.appendTo(o)},list:function(){function i(e,t,n){return _.map(e,function(e){var r={title:e[t],value:e[n]};return e._childList&&(r._childList=i(e._childList,t,n)),r})}var e,t,n=this.model.get("typeObject"),r=[];return n&&this.model.get("dataType")==="wordbook"?(t=n.schema.idName,e=_.findWhere(n.schema.attributes,{display:"title"}),e=e?e.name:t,r=i(n.data.collection,e,t)):this.model.get("list")&&"string"==typeof this.model.get("list")&&(r=this.model.get("list").split(","),r=_.map(r,function(e){var t=e.split(":");return{title:t[1]?t[1]:t[0],value:t[0]}})),this.model.set("list",r),this},onNormal:function(){this.$el.removeClass("has-error"),this.$el.tooltip("destroy")},onError:function(e){this.$el.addClass("has-error"),this.$el.tooltip({title:e,selector:!0,trigger:"hover"})},verify:function(){var e,t=[],n=this.control.getValue();this.$el.hasClass("has-error")&&this.$el.removeClass("has-error"),this.model.get("required")&&t.push({name:"required"}),t.push({name:this.model.get("dataType")}),this.model.get("max")&&t.push({name:"max",params:[this.model.get("max")]}),this.model.get("min")&&t.push({name:"min",params:[this.model.get("min")]}),this.model.get("maxLength")&&t.push({name:"maxLength",params:[this.model.get("maxLength")]}),this.model.get("minLength")&&t.push({name:"minLength",params:[this.model.get("minLength")]});for(var i=0;i<t.length;i++)if(r[t[i].name]){t[i].params||(t[i].params=[]),t[i].params.unshift(n),e=r[t[i].name].apply(null,t[i].params);if(!0!==e){this.form.errors[this.model.get("name")]=e,this.onError((this.model.get("alias")?this.model.get("alias"):this.model.get("name"))+" "+e);return}this.onNormal(),this.form.errors[this.model.get("name")]&&delete this.form.errors[this.model.get("name")]}this.setValue(n)},display:function(){},filter:function(){},setValue:function(e){var t={},n=this.model.get("name");t[n]=e,this.type==="filter"?(!e&&e!==!1&&this.form.model.unset(n),e&&this.form.model.set(t)):this.form.model.set(t,{silent:!0})},onFocus:function(){this.onNormal()},onChange:function(e){this.verify()},onFileChange:function(e){this.verify()}});return i}),define("components/form/general",["require","./base","./item"],function(e){var t=e("./base"),n=e("./item"),r=t.extend({className:"form-horizontal",initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return this.collection.each(this.renderItem,this),this},renderItem:function(e,t){e.get("control")=="file"&&(this.isUpload=!0);var r=new n({model:e,form:this});r.render().$el.appendTo(this.$el),this.items[e.get("name")]=r},addGroup:function(){}});return r}),define("view/kit/action/action",[],function(){}),define("view/kit/action",["require","./list","../../utility/modal","../../components/form/general","./action/action"],function(e){var t=e("./list"),n=e("../../utility/modal"),r=e("../../components/form/general"),i=e("./action/action"),s=t.Item.extend({tagName:"button",className:"btn btn-default",events:{click:"onClick"},initialize:function(e){t.Item.prototype.initialize.apply(this,arguments)},render:function(){var e='<span class="glyphicon" aria-hidden="true"></span> <%=name%>';return this.$el.html(_.template(e,this.model.toJSON())),this.icon(),this.model.get("primary")&&this.primary(),this},primary:function(){return this.$el.addClass("btn-success"),this},icon:function(){return this.model.get("icon")&&this.$(".glyphicon").addClass(this.model.get("icon")),this},form:function(e,t){var n=(new r({collection:e,model:t})).render();n.model.urlRoot=this.view.model.url,this.model.get("key")&&(n.model.urlRoot+="/"+this.model.get("key"));var i=this.modal(n.el);return i.$(".rb-submit:not(.disabled)").on("click",function(e){n.onSubmit(e)}),n.on("success",function(){this.view.model.request(),i.close()},this),this},modal:function(e){var t=new n({model:new Backbone.Model({title:this.model.get("legend")?this.model.get("legend"):this.model.get("name"),type:"modal-sm"}),content:e,tpl:"#tpl-modal-form"});return t.render(),t},subview:function(){return this},side:function(){return this},openWindow:function(){return this},commit:function(){return this},request:function(){return this},cancel:function(){return this},refresh:function(){this.view.model.request()},getUrl:function(){},listFilter:function(e){var t=this.model.get("list");return t&&(t=t.split(","),e=_.filter(e,function(e){return _.indexOf(t,e.name)>=0})),e},one:function(){this.batch(1)},batch:function(e){var t=this.view.selecteds.length;if(e&&t>e)return alert("Selected items can not be superfluous "+e);var n="Confirm the selected "+t+" items to"+this.model.get("name")+"operate?";if(!confirm(n))return;this.action(this.view.model.url+"/"+this.model.get("key"))},post:function(){this.form(new Backbone.Collection(this.listFilter(this.view.createSchema)),new this.view.Model)},put:function(){var e=this.view.getActiveModel();this.form(new Backbone.Collection(this.listFilter(this.view.updateSchema)),e)},"delete":function(){if(!confirm("Confirm the selected "+this.view.selecteds.length+" items to"+this.model.get("name")+"operate?"))return;this.action(this.view.model.url,!0)},action:function(e,t){var n=this.view.getSelecteds(),r=this.view.idName;t?n=_.pluck(n,r):n=_.map(n,function(e){var t={};return t[r]=e[r],t});var i=this;$.ajax(e,{data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=UTF-8",type:this.model.get("method")?this.model.get("method"):"POST"}).success(function(e,t){i.view.model.request(),rainbow.alert(e.content)}).error(function(e,t){rainbow.alert(e.responseJSON.content)})},extend:function(t){var n=this;e(["action/"+t],function(e){typeof e=="function"&&e.apply(n)})},onClick:function(e){var t=this.model.get("action");if(t&&t.slice(0,2)=="e.")return this.extend(t.slice(2));if(t&&this[t])return this[t]();var n=this.model.get("method").toUpperCase();switch(n){case"PUT":this.put();break;case"DELETE":this["delete"]();break;default:this.post()}}}),o=t.List.extend({initialize:function(e){t.List.prototype.initialize.apply(this,arguments)},render:function(){return this.collection.each(this.renderItem,this),this.view.$(".rb-action").empty().append(this.el),this},addGroup:function(){return this.$el.append('<div class="btn-group"></div>'),this},renderItem:function(e,t){(e.get("group")||t<1)&&this.addGroup();if(!this.view.getSelectedState(e.get("selected")))return;var n=new s({model:e,view:this.view});this.$(".btn-group").last().append(n.render().el)}});return o}),define("view/kit/filter",["require","./list","../../components/form/item"],function(e){var t=e("./list"),n=e("../../components/form/item"),r=t.List.extend({className:"form-inline",initialize:function(e){t.List.prototype.initialize.apply(this,arguments),this.model=this.view.model.filter,this.items={},this.errors={}},render:function(){return this.collection.each(this.renderItem,this),this.view.$(".rb-filter").append(this.el),this},renderItem:function(e,t){var r=_.findWhere(this.view.model.get("schema").attributes,{name:e.get("name")});e.get("value")===undefined&&e.set("value",""),r=_.defaults(e.toJSON(),r),e.set(r);var i=new n({model:e,form:this,type:"filter"});this.$el.append(i.render().el)}});return r}),define("view/kit/pagination",["require","./list"],function(e){var t=e("./list"),n=t.Item.extend({tagName:"li",events:{click:"onClick"},initialize:function(e){t.Item.prototype.initialize.apply(this,arguments)},render:function(){var e='<a href="javascript:void(0);"><%=name%></a>';return this.$el.html(_.template(e,this.model.toJSON())),this},onClick:function(){this.$el.addClass("active").siblings().removeClass("active"),this.view.model.filter.set({_page:this.model.get("num")})}}),r=t.List.extend({tagName:"li",className:"pagination",initialize:function(e){t.List.prototype.initialize.apply(this,arguments)},render:function(){var e=9,t,n,r,i=this.model.get("count"),s=this.model.get("current");i>e?(t=Math.floor(e/2),r=s+t,r=r>i?i:r,n=r-e+1,n=n<1?1:n):(e=i,n=1);if(i>1)for(var o=n;o<n+e;o++)this.renderItem(new Backbone.Model({num:o,name:o}),o);return this.view.$(".rb-pagination").empty().append(this.el),this},renderItem:function(e,t){var r=new n({model:e,view:this.view});this.$el.append(r.render().el),t===this.model.get("current")&&r.$el.addClass("active")}});return r}),define("components/list/base",["require"],function(e){var t=Backbone.View.extend({initialize:function(e){this.tpl=e.tpl,this.params=e.params},render:function(){return this.$el.html(_.template($(this.tpl).html())),this},renderItem:function(){},renderChildList:function(){},update:function(){this.header(),this.body(),this.footer()},header:function(){},body:function(){},footer:function(){}});return t}),define("components/base/list",["require"],function(e){var t=Backbone.View.extend({initialize:function(e){this.Item=e.Item},render:function(){return this.update(),this},update:function(){this.collection.each(this.renderItems,this)},renderItems:function(e,t){var n=new this.Item({model:e,list:this});n.render().$el.appendTo(this.$el)}});return t}),define("components/list/row/cell",["require"],function(e){var t=Backbone.View.extend({tagName:"td",initialize:function(e){this.row=e.row,this.table=this.row.table,this.isHead=e.isHead,this.isHead||(this.events=this.model.get("events")),this.model.set("_row",this.row.model.toJSON())},format:function(){var e="<%=_value%>";if(!this.isHead){var t=this.model.get("format");typeof t=="string"&&(e=t),typeof t=="function"&&(e=t.apply(this,[this.model.get("_value"),this.row.model.toJSON()]))}return e},rowspan:function(){var e="_rowspan_"+this.model.get("name");if(!this.table.model.get(e)||this.table.model.get(e).value!=this.model.get("_value"))this.table.model.set(e,{value:this.model.get("_value"),cell:this,rowspan:1});else{var t=this.table.model.get(e);t.rowspan+=1,t.cell.$el.attr("rowspan",t.rowspan),this.$el.hide()}return this},render:function(){var e='<div class="table-cell">'+this.format()+"</div>";this.$el.html(_.template(e)(this.model.toJSON())),this.model.get("className")&&this.$el.addClass(this.model.get("className")),this.model.get("rowspan")&&!this.isHead&&this.rowspan();var t=this.model.get("display");return!this.isHead&&typeof t=="function"&&t.apply(this,[this.model.get("_value"),this.row.model.toJSON()]),this}});return t}),define("components/list/row/base",["require","../../base/list","./cell"],function(e){var t=e("../../base/list"),n=e("./cell"),r=Backbone.View.extend({initialize:function(e){this.Item=this.Item?this.Item:n,this.list=e.list,this.activeClass=e.activeClass?e.activeClass:"active",this.selectedClass=e.selectedClass?e.selectedClass:"active",this.disbaleClass=e.disbaleClass?e.disbaleClass:"disbale",this.isHandle=e.isHandle,this.isHandle&&this.model.on("change",function(e){e.changed._selected===undefined?(this.render(),e.set({_selected:!1})):this.selectedStyle(e.changed._selected)},this)},events:{click:"toggle"},render:function(){return this},toggle:function(e){$t=$(e.target);if($t.hasClass("rb-title"))this.model.set({_details:!0});else if(this.isHandle&&!this.isHead){var t=this.model.get("_selected");!t&&!$t.hasClass("rb-checkbox")&&this.list.collection.each(function(e){e.set({_selected:!1})},this),this.active(e,!this.model.get("_selected"))}else this.isHead&&$t.hasClass("rb-checkbox")&&this.list.collection.each(function(e){e.set({_selected:$t.get(0).checked})},this);return this},active:function(e,t){return this.selected(e,t),this},selected:function(e,t){return this.model.set({_selected:t}),this},selectedStyle:function(e){return e?this.$el.addClass(this.selectedClass):this.$el.removeClass(this.selectedClass),this.$(".rb-checkbox").size()&&(this.$(".rb-checkbox").get(0).checked=e),this},disbale:function(){return this.$el.addClass(this.disbaleClass),this},context:function(){}});return r}),define("components/list/row/table",["require","./base","./cell"],function(e){var t=e("./base"),n=e("./cell"),r=t.extend({tagName:"tr",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.cellTag=e.isHead?"th":"td",this.table=e.table,this.columns=e.columns,this.isHead=e.isHead},render:function(){return this.$el.empty(),_.each(this.columns,function(e){var t=e.name;e._value="",this.isHead?e._value=e.alias?e.alias:e.name:this.model.get(t)&&(e._value=this.model.get(t)),this.renderCell(new Backbone.Model(e))},this),this.isHandle&&this.handler(),this},handler:function(){return $td=$("<"+this.cellTag+">"),$td.html('<input class="rb-checkbox" type="checkbox">'),$td.css({width:"30px","text-align":"center"}),this.$el.prepend($td),this},renderCell:function(e){var t=new n({model:e,tagName:this.cellTag,row:this,isHead:this.isHead,attributes:e.get("attributes")});t.render().$el.appendTo(this.$el)}});return r}),define("components/list/table",["require","./base","./row/table"],function(e){var t=e("./base"),n=e("./row/table"),r=t.extend({tagName:"table",className:"table table-condensed table-hover widget-table",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.fixed=e.fixed,this.isHandle=e.isHandle,this.isTree=e.isTree},render:function(){return this.$el.html("<thead></thead><tbody></tbody>"),this.update(),this},header:function(){var e=this.model.get("series"),t={};this.renderItem(new Backbone.Model(t),0,!0)},body:function(e,t){this.collection=this.model.get("data");var n=this.model.get("limit");n&&(this.collection=this.collection.slice(n[0],n[1])),this.collection.each(function(e,t){if(this.model.get("maxLength")&&t+1>this.model.get("maxLength"))return;this.renderItem(e,t)},this)},empty:function(){return this.$("thead").empty(),this.$("tbody").empty(),this},copyHeader:function(){var e=$('<table class="table table-condensed table-hover widget-table"></table>'),t=this.$("thead"),n=t.find("th"),r=t.clone(),i=r.find("th");return e.height(t.height()),this.$el.css("margin-top",-t.height()-1),i.each(function(e,t){$(t).css("width",n.eq(e).outerWidth())}),e.append(r),e},update:function(){return this.empty(),this.header(),this.body(),this},renderItem:function(e,t,r,i,s){i=i?i:0;var o=this.model.get("series"),u=this.$(r?"thead":"tbody");i&&(e=this.collection.add(e,{silent:!0})),e.set("_index",t);var a=new n({model:e,columns:o,list:this,isHead:r,isHandle:this.isHandle});a.render().$el.appendTo(u),i&&(a.$el.hide(),s&&a.$el.addClass(s.$el.attr("class")+" row-p-"+s.cid),a.$el.attr("data-parent",s.cid),a.$(".rb-title").parent().css("padding-left",i*20));if(e.get("_childList")){a.$(".rb-title").parent().prepend('<span class="rb-node glyphicon glyphicon-plus"></span> '),a.$(".rb-node").click(function(e){var t=$(e.target);t.hasClass("open")?(t.removeClass("open").removeClass("glyphicon-minus").addClass("glyphicon-plus"),$(".row-p-"+a.cid).hide().find(".open").removeClass("glyphicon-minus").addClass("glyphicon-plus").removeClass("open")):(t.addClass("open").removeClass("glyphicon-plus").addClass("glyphicon-minus"),$(".row-p-"+a.cid+'[data-parent="'+a.cid+'"]').show()),e.preventDefault(),e.stopPropagation()});var f=e.get("_childList");_.each(f,function(e,t){this.renderItem(e,t,!1,i+1,a)},this)}else this.isTree&&a.$(".rb-title").parent().prepend('<span class="rb-node glyphicon glyphicon-minus"></span> ');return a}});return r}),define("components/list/row/schedule",["require","./base","./cell"],function(e){var t=e("./base"),n=e("./cell"),r=n.extend({className:"schedule-cell",render:function(){var e=this.format();return this.$el.html(_.template(e)(this.model.toJSON())),this}}),i=t.extend({className:"schedule-event",events:{click:"onClick"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.cellTag="span",this.list=e.list,this.columns=e.columns,this.isHead=e.isHead},render:function(){return this.$el.empty(),_.each(this.columns,function(e){var t=e.name;e._value="",this.isHead?e._value=e.alias?e.alias:e.name:this.model.get(t)&&(e._value=this.model.get(t)),this.renderCell(new Backbone.Model(e))},this),this},renderCell:function(e){var t=new r({model:e,tagName:this.cellTag,row:this,isHead:this.isHead,attributes:e.get("attributes")});t.render().$el.appendTo(this.$el)},onClick:function(e){}});return i}),define("components/list/schedule",["require","./base","./row/schedule","moment"],function(e){var t=e("./base"),n=e("./row/schedule"),r=e("moment"),i=Backbone.View.extend({className:"schedule-day",initialize:function(e){this.date=e.date},render:function(){var e="<span><%=day%></span><span><%=weekly%></span>",t=["Su","Mo","Tu","We","Th","Fr","Sa"],n={day:this.date.getDate(),weekly:t[this.date.getDay()]};return this.$el.html(_.template(e,n)),this.$el.attr("data-date",r(this.date).format("YYYY-MM-DD")),(this.date.getDay()===0||this.date.getDay()===6)&&this.$el.addClass("muted"),this}}),s=Backbone.View.extend({className:"schedule-row clearfix",initialize:function(e){this.isHead=e.isHead},render:function(){var e=$("#tpl-list-schedule-row").html();this.$el.html(_.template(e));var t=this.model.get("_value"),n=this.model.get("format");return t=!this.isHead&&n?n.apply(this,[t,null,!0]):t,this.$(".schedule-title").html(t),this}}),o=t.extend({className:"schedule",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.fixed=e.fixed,this.isHandle=e.isHandle,this.groups={},this.timeName=e.groupName?e.groupName:["start_time","end_time"],this.today=this.params.get(this.timeName[0])?r(this.params.get(this.timeName[0]).split(",")[0]).format("x"):null,this.today=this.today?new Date(parseInt(this.today)):new Date,this.series=this.model.get("series"),this.collection=this.model.get("data"),this.group=new Backbone.Model(_.findWhere(this.series,{display:"title"})),this.month=this.today.getMonth()+1,this.year=this.today.getFullYear()+1,this.$days=null,this.colors=["#ff8800","#8800cc","#0088ff","#008800"],this._colors=[],this.count=((new Date(this.today.getTime())).setMonth(this.month,1)-(new Date(this.today.getTime())).setDate(1))/24/60/60/1e3},render:function(){return this.$el.html($("#tpl-list-schedule").html()),this.$el.width(this.count*45+122),this.update(),this},header:function(){var e=this.group;e.set("_value",this.group.get("alias"));var t=(new s({model:e,isHead:!0})).render();for(var n=0;n<this.count;n++)this.renderDay((new Date(this.today.getTime())).setDate(n+1),t.$(".schedule-days"));this.$days=t.$(".schedule-days").clone(),this.$days.find(".schedule-day").html("<span></span>"),this.$(".schedule-header").append(t.el)},body:function(){this.collection.each(this.renderRow,this)},renderRow:function(e){var t=e.get(this.group.get("name"));this.groups[t]||this.addGroup(t);var r=new n({model:e,columns:this.series,list:this});this.groups[t].$(".schedule-events").append(r.render().el),this.position(r,this.groups[t])},addGroup:function(e){var t=this.group;t.set("_value",e);var n=(new s({model:t})).render();n.$(".schedule-days").append(this.$days.html()),this.$(".schedule-list").append(n.el),this.groups[e]=n},position:function(e,t){var n=(new Date(e.model.get(this.timeName[0]))).getMonth()+1;if(n!==this.month){e.$el.remove();return}var r=(new Date(e.model.get(this.timeName[0]))).getDate(),i=(new Date(e.model.get(this.timeName[1]))).getDate(),s=120+(r-1)*45,o=(i-r+1)*45-1,u=e.model.get("sequence_no"),a=_.indexOf(this._colors,u);a<0&&(a=this._colors.push(u)-1),e.$(".rb-title").parent().remove(),e.$el.css({left:s,width:o,"background-color":this.colors[a]})},copyHeader2:function(){var e=$('<div class="schedule"></div>'),t=this.$(".schedule-header").clone();return this.$el.css("margin-top",-this.$(".schedule-header").height()-1),e.width(this.$el.outerWidth()),e.append(t),e},renderDay:function(e,t){var n=new i({date:new Date(e)});t.append(n.render().el)},update:function(){this.header(),this.body()}});return o}),define("view/details",["require"],function(e){var t=Backbone.View.extend({tagName:"div",className:"details content-body",initialize:function(e){this.schema=e.schema},render:function(){return this.$el.append('<table class="table table-bordered"><tbody></tbody></table>'),this.collection.each(function(e){var t=e.get("alias")?e.get("alias"):e.get("name"),n=this.model.get(e.get("name"))?this.model.get(e.get("name")):"",r={model:e};e.get("format")&&(n=e.get("format").apply(r,[n])),this.$("tbody").append('<tr><th width="160" style="background-color: #f9f9f9;">'+t+'</th><td style="background-color: #ffffff;">'+n+"</td></tr>")},this),this}});return t}),define("view/iframe",["require","./base"],function(e){var t=e("./base"),n=t.extend({template:_.template($("#tpl-view-iframe").html()),initialize:function(){t.prototype.initialize.apply(this,arguments)},render:function(){var e='<iframe name="" frameborder="0" src="'+this.model.get("url")+'"'+'height="100%" width="100%" style="visibility: visible;"></iframe>';return this.$el.append(this.template()),this.$(".rb-content-body").html(e).css("padding",0),this.setBodyHeight(),this},breadcrumb:function(){var e=new compontent.Breadcrumb({collection:new Backbone.Collection(this.model.get("breadcrumb")),view:this});this.$(".rb-breadcrumb").html(e.render().el)}});return n}),define("view/nested",["require","./base","./details","./iframe"],function(e){var t=e("./base"),n=e("./details"),r=e("./iframe"),i=Backbone.View.extend({tagName:"li",events:{click:"onClick"},initialize:function(e){this.view=e.view},render:function(){return this.$el.html('<a href="javascript:;">'+this.model.get("alias")+"</a>"),this},onClick:function(e){this.$el.addClass("active").siblings().removeClass("active"),this.view[this.model.get("type")](this.model)}}),s=Backbone.View.extend({tagName:"ul",className:"nav nav-pills",initialize:function(e){this.view=e.view},render:function(){return this.collection.each(this.renderItem,this),this},renderItem:function(e){var t=new i({model:e,view:this.view,attributes:{role:"presentation"}});this.$el.append(t.render().el)}}),o=t.extend({tplId:"tpl-view-nested",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.parent=e.parent,this.nestedLevel=e.nestedLevel?e.nestedLevel:1},events:{"click .rb-back":"exit"},render:function(){this.parent.hide(),t.prototype.render.apply(this,arguments),this.tab();var e=this;return setTimeout(function(){e.setBodyHeight()},50),this},tab:function(){var e=_.filter(this.parent.model.get("schema").attributes,function(e){return e.type==="collection"||e.type==="link"});e.unshift({alias:"Details",type:"details"});var t=(new s({collection:new Backbone.Collection(e),view:this})).render();this.$(".rb-tab").html(t.el),this.$(".rb-tab>ul>li").first().click()},details:function(){var e=_.reject(this.parent.model.get("schema").attributes,function(e){return this.idName===e.name||e.hidden&&["all"].indexOf(e.hidden)>=0||e.type==="collection"||e.type==="model"},this);e=this.parent.schemaFilter(e);var t=(new n({model:this.model,collection:new Backbone.Collection(e)})).render();this.$(".rb-subview").html(t.el),this.setBodyHeight()},link:function(e){var t=new r({model:new Backbone.Model({url:e.get("value")}),parent:this,nestedLevel:this.nestedLevel?this.nestedLevel+1:1});this.$(".rb-subview").html(t.render().el)},collection:function(e){var t=new rainbow.ViewModel;t.$body=this.$(".rb-subview"),t.nestedLevel=this.nestedLevel?this.nestedLevel+1:1,t.parent=this;var n=this.parent.idName;t.url=this.parent.model.url+"/"+this.model.get(n)+"/"+e.get("name"),t.request()},exit:function(e){this.destroy(),this.parent.show(),e.stopPropagation(),e.preventDefault()}});return o}),define("view/standard",["require","./base","./kit/action","./kit/filter","./kit/pagination","../components/list/table","../components/list/schedule","../utility/filter","./nested"],function(e){var t=e("./base"),n={Action:e("./kit/action"),Filter:e("./kit/filter")},r=e("./kit/pagination"),i=e("../components/list/table"),s=e("../components/list/schedule"),o=e("../utility/filter"),u=e("./nested"),a=t.extend({tplId:"tpl-view-standard",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.idName=this.model.get("schema").idName,this.Model=Backbone.Model.extend({idAttribute:this.idName,parse:function(e){return e.data}}),this.Collection=Backbone.Collection.extend({model:this.Model}),this.collection=new this.Collection,this.collection.on("add",function(){this.update()},this),this.collection.on("remove",function(){this.selecteds.reset(),this.update(),this.updateAction()},this),this.collection.on("change:_selected",function(e,t){t&&this.selected(e),t||this.unselected(e),this.$(".rb-status-selected").text(this.selecteds.length)},this),this.collection.on("change:_details",function(e,t){e.unset("_details",{silent:!0}),this.details(e)},this),this.selecteds=new Backbone.Collection,this.model.get("handle")&&this.handle(),this.createSchema=_.filter(this.model.get("schema").attributes,function(e){return(e.access=="write"||e.access=="createonly")&&e.system==="none"},this),this.updateSchema=_.filter(this.model.get("schema").attributes,function(e){return(e.access=="write"||e.access=="updateonly")&&e.system==="none"},this),this.kits={Action:this.model.get("actions"),Filter:this.model.get("schema").filters}},handle:function(){this.isHandle=!0},render:function(){return t.prototype.render.apply(this,arguments),this.renderKit(),this.setCollection(),this.update(),this},renderKit:function(){for(var e in this.kits)this.kits[e]&&this.renderKitItem(e,this.kits[e]);return this},renderKitItem:function(e,t){var r={view:this};r.collection=new Backbone.Collection(t);var i=(new n[e](r)).render();return this},pagination:function(){this.model.get("data").pagination&&(new r({model:new Backbone.Model(this.model.get("data").pagination),view:this})).render();var e=this.model.get("data").pagination,t='Current <%=first%> - <%=end%> items , selected <span class="rb-status-selected"> <%=selected%> </span> items , total <%=count%> items',n=e?e.size*(e.current-1)+1:1,i=this.model.get("data").count,s=e?n+e.size-1:i;s=s>i?i:s;var o={first:n,end:s,selected:this.selecteds.length,count:i};return this.$(".rb-status").empty(),t=i?t:"Current 0 items",this.$(".rb-status").html(_.template(t,o)),this},schemaFilter:function(e){return e=_.map(e,function(e){return e.list?e.format=o["enum"]:e.dataType==="wordbook"?e.format=o.wordbook:e.dataType==="date"?e.format=o.date:e.metaType==="Time"?e.format=o.time:e.name===this.idName?e.format=o.id:e.display==="title"&&(e.format=o.title),e},this),e},renderWidget:function(){var e=_.reject(this.model.get("schema").attributes,function(e){return this.idName===e.name||e.hidden&&["list","all"].indexOf(e.hidden)>=0||e.type==="collection"||e.type==="link"||e.type==="model"},this);e=this.schemaFilter(e);var t=new Backbone.Model({series:e,data:this.collection}),n={Table:i,Schedule:s},r=this.model.get("mode")==="schedule"?"Schedule":"Table",o=new n[r]({model:t,view:this,isHandle:this.isHandle,isTree:!!this.model.get("schema").parentIdName,params:this.model.filter});o.render().$el.appendTo(this.$(".rb-content-body-list").empty()),this.widget=o,this.setBodyHeight()},details:function(e){var t=new u({coms:this.coms,parent:this,model:e});t.render(),this.$el.after(t.el)},setCollection:function(){return this.selecteds.reset(),this.collection.reset(this.model.get("data").collection),this},selected:function(e){this.selecteds.add(e),this.updateAction()},unselected:function(e){this.selecteds.remove(e),this.updateAction()},selectedAll:function(){},getSelectedState:function(e){var t=this.selecteds.length,n=!0;switch(e){case"none":t>0&&(n=!1);break;case"somewhat":t<1&&(n=!1);break;case"single":t!==1&&(n=!1);break;case"mulpitle":t<2&&(n=!1)}return n},getActiveModel:function(){return this.selecteds.findWhere({_selected:!0})},getSelecteds:function(){return this.selecteds.toJSON()},update:function(){this.updateAction(),this.pagination(),this.renderWidget();var e=this;return setTimeout(function(){e.setBodyHeight()},30),this},updateAction:function(){return this.renderKitItem("Action",this.kits.Action),this.setBodyHeight(),this},error:function(){}});return a}),define("view/aid",["require"],function(e){}),define("view/preview",["require"],function(e){}),define("view/view",["require","./base","./standard","./aid","./preview","./iframe"],function(e){var t={Base:e("./base"),Standard:e("./standard"),Aid:e("./aid"),Preview:e("./preview"),Iframe:e("./iframe")};return t}),define("view/model",["require","./view"],function(e){var t=e("./view"),n=Backbone.Model.extend({idAttribute:"id",initialize:function(e){this.res=e?e.res:null,this.view=null,this.filter=new Backbone.Model,this.filter.on("change",this.request,this)},request:function(){if(this.res&&"link"===this.res.model.get("type"))return this.iframe(this.res);var e=this;return this.fetch({success:function(e,t,n){e.display()},error:function(e,t,n){var r=t.responseJSON;if(r&&r.type==="unauthorized")return alert(r.content),rainbow.route("signin",{trigger:!0});console.error("REQUEST_ERROR")},data:_.extend(this.filter.toJSON(),{_time:(new Date).getTime()})}),this},display:function(){return this.get("extend")?this.extend(this.get("extend")):(!this.view&&this.createView(),this.view&&this.view.setCollection()&&this.view.update()),this},iframe:function(e){return this.set(e.model.toJSON()),this.createView("Iframe")},extend:function(t){var n=this;e(["../../js/view/"+t],function(e){e.apply(n)})},createView:function(e){var e=e?e:this.get("type");e=e?e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase():"Standard";var n=new t[e]({model:this,res:this.res,coms:t,nestedLevel:this.nestedLevel,parent:this.parent,attributes:{id:"view-"+this.id}});return this.$body.removeClass("loading").empty().append(n.el),rainbow.current=n,this.view=n,this.view.render(),this}});return n}),define("base/nav",["require","../view/model"],function(e){var t={},n=e("../view/model"),r=Backbone.Model.extend({idAttribute:"id"});rainbow.ViewModel=n;var i=Backbone.Collection.extend({url:rainbow.baseUrl+"/res",model:r,parse:function(e){return e.resources}}),s=Backbone.View.extend({tplId:"tpl-nav-item",template:_.template,tagName:"a",events:{click:"onClick"},initialize:function(e){this.path=e.path?e.path+"/":"",this.path+=this.model.get("key"),this.tplId=e.tplId?e.tplId:this.tplId,this.parent=e.parent,this.view=e.view,this.level=e.level,this.collection=new Backbone.Collection(this.model.get("childs")),this.$childs=null,this.view.model.on("change:_active",function(e){var t=this.view.model.get("_active"),n=t.path.slice(0,this.path.length);t===this?(this.$el.addClass("active"),this.$("ul.sub").slideDown("fast")):this.level!==t.level&&this.path===n?(this.$el.addClass("active"),this.$("ul.sub").slideDown("fast")):this.$el.hasClass("active")&&(this.$el.removeClass("active"),this.$("ul.sub").slideUp("fast"))},this)},route:function(){var e=this.path,t=this;return rainbow.router.route(e+"*path",function(e){e=e?e.split("/").slice(1):e,t.onActive(e)}),"#"+e},render:function(){return this.route(),this.$el.html(_.template($("#"+this.tplId).html(),this.model.toJSON())),this.$el.is("a")?this.$el.attr("href",this.route()):this.$("a").attr("href",this.route()),this},renderChild:function(e,t){var n=new s({model:e,path:this.path,view:this.view,parent:this,tplId:"tpl-nav-item",tagName:"li",className:"list-group-item",level:this.level+1});this.$childs.append(n.render().el),n.$("a").attr("href",n.$el.attr("href")),this.first=this.first?this.first:n;if(this.childPath&&this.childPath[0]===n.model.get("key")){var r=this.childPath?this.childPath.slice(1):null;n.onActive(r)}},onActive:function(e){this.childPath=e,this.view.model.set("_active",this);var t=$(".rb-nav-"+(this.level+1));t.empty(),this.collection.length>0?(this.$childs||(this.$childs=t,this.$childs.size()||(this.$childs=$('<ul class="sub"></ul>').appendTo(this.$el))),this.$childs.empty(),this.collection.each(this.renderChild,this),e||rainbow.route(this.first.path,{trigger:!0})):(this.model.get("type")==="view"||this.model.get("type")==="link")&&this.loadView(e)},loadView:function(e){var t=new n({res:this});t.params=e,t.url=rainbow.baseUrl+"/"+this.path.replace(/\//g,"-"),t.$body=$('<div class="rb-view view loading"></div>'),rainbow.layout.$(".rb-views").empty().append(t.$body),t.request()},onClick:function(e){rainbow.route(this.path,{trigger:!0}),e.preventDefault(),e.stopPropagation()}}),o=Backbone.View.extend({tagName:"ul",className:"nav navbar-nav",initialize:function(e){this.model=new Backbone.Model,this.path=e.path},render:function(){return $(".rb-nav-0").empty(),this.$el.appendTo(".rb-nav-0"),this.collection.each(this.renderItem,this),this},renderItem:function(e,t){var n=new s({model:e,path:"",view:this,parent:this,level:0,tagName:"li",tplId:"tpl-nav-item"});this.$el.append(n.render().el),this.first=this.first?this.first:n},start:function(){this.path&&rainbow.route(this.path,{trigger:!0}),this.model.get("_active")||rainbow.route(this.first.path,{trigger:!0})}});return t.request=function(e){var t=new i;t.fetch({success:function(t,n,r){var i=new o({collection:t,path:e});i.render(),rainbow.start(),i.start()},error:function(e,t,n){alert(t.responseJSON.content),rainbow.start(),rainbow.route("signin",{trigger:!0})}})},t}),define("boot",["require","exports","module","./base/app","./base/nav"],function(e,t,n){var r=e("./base/app"),i=e("./base/nav");r.nav=i,r.sign.isIn()?i.request():(r.start(),r.route("signin",{trigger:!0}))}),define("rainbow",["require","underscore","bootstrap","backbone","./boot"],function(e){e("underscore"),e("bootstrap"),e("backbone"),e("./boot")});