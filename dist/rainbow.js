define("keelkit/rainbow/1.0.0/rainbow",["./base/app","cookie","./common/sign","json"],function(a){var b=a("./base/app");a("json"),b.sign.isIn()||b.route("signin",{trigger:!0})}),define("keelkit/rainbow/1.0.0/base/app",["cookie","keelkit/rainbow/1.0.0/common/sign"],function(a){var b=a("/assets/Rainbow/templates/site/desktop.html");$("body").append(b);var c={};rainbow=c,c.cookie=a("cookie"),_.extend(c,Backbone.Events),c.window={},$(window).on("resize",$.proxy(this,function(){c.window={height:$(window).innerHeight(),width:$(window).innerWidth()}})),c.alert=function(a){alert(a)},c.confirm=function(a){return confirm(a)},c.sign=a("keelkit/rainbow/1.0.0/common/sign");var d=Backbone.Router.extend({routes:{"!signin":"signin","!*path":"nav"},nav:function(a){c.alert(a)},search:function(a,b){c.alert("search"+a+b)},signin:function(){c.sign.login()}});return c.router=new d,c.route=function(a,b){return a=a?"!"+a:"",c.router.navigate(a,b)},Backbone.history.start(),c.views={},c.coms={},c.current,c}),define("keelkit/rainbow/1.0.0/common/sign",[],function(){var a=$($("#tpl-login").html()).appendTo("body").hide();a.on("click",".btn-success",function(){return rainbow.cookie.set("status",1),a.fadeOut(),rainbow.route(""),!1}),$("#J-signout").on("click",function(){rainbow.confirm("确定要退出当前登录的账号？")&&(b.logout(),rainbow.route("signin",{trigger:!0}))});var b={login:function(){a.fadeIn()},logout:function(){rainbow.cookie.remove("status")},isIn:function(){return rainbow.cookie.get("status")}};return b});
